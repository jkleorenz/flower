*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

 :root {
  --night-1: #02040a;
  --night-2: #0a1224;
  --night-3: #14233f;
  --glow: #b3e5ff;
  --stem: #0f6a3a;
  --stem-dark: #0b4c29;
  --leaf: #1a8a4f;
  --leaf-vein: #0e5a33;
  --rose-1: #9b001a;
  --rose-2: #c30025;
  --rose-3: #ff2f4d;
  --rose-highlight: #ff6f7f;
  --shadow: rgba(0, 0, 0, 0.45);
}

html,
body {
  height: 100%;
}

body {
  background: radial-gradient(120vmin 80vmin at 50% 10%, var(--night-3), var(--night-2) 40%, var(--night-1) 75%);
  color: #fff;
  display: grid;
  place-items: end center;
  overflow: hidden;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, sans-serif;
}

.night {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(100vmin 90vmin at 50% -10%, rgba(255,255,255,0.06), transparent 60%),
    radial-gradient(60vmin 30vmin at 80% 10%, rgba(179,229,255,0.14), transparent 70%),
    radial-gradient(40vmin 20vmin at 20% 8%, rgba(179,229,255,0.12), transparent 70%);
  filter: saturate(120%);
}

.garden {
  width: min(96vmin, 1280px);
  height: 100vmin;
  max-height: 92vh;
  position: relative;
}

.rose {
  position: absolute;
  left: 50%;
  bottom: 12vmin;
  transform: translateX(-50%);
  transform-origin: bottom center;
  animation: sway 6s ease-in-out infinite;
}

.rose__shadow {
  position: absolute;
  left: 50%;
  bottom: -6vmin;
  transform: translateX(-50%);
  width: 42vmin;
  height: 6vmin;
  background: radial-gradient(closest-side, rgba(0,0,0,0.35), transparent 70%);
  filter: blur(6px);
}

.rose__stem {
  position: relative;
  width: 1.2vmin;
  height: 54vmin;
  margin-inline: auto;
  background: linear-gradient(180deg, var(--stem), var(--stem-dark));
  box-shadow: inset 0 0 0 0.2vmin rgba(255,255,255,0.04), inset 0 0 1.2vmin rgba(255,255,255,0.08);
  border-radius: 1vmin;
  transform: translateZ(0);
}

.rose__thorn {
  position: absolute;
  left: -0.7vmin;
  top: var(--y);
  width: 0;
  height: 0;
  border-left: 0.8vmin solid transparent;
  border-right: 0.8vmin solid transparent;
  border-bottom: 1.4vmin solid var(--stem-dark);
  transform: rotate(-20deg);
  filter: drop-shadow(0 0.2vmin 0.2vmin rgba(0,0,0,0.4));
}

.rose__leaf {
  position: absolute;
  bottom: 24vmin;
  width: 14vmin;
  height: 9vmin;
  background: radial-gradient(140% 100% at 20% 40%, var(--leaf) 20%, var(--leaf-vein) 80%);
  border-top-left-radius: 100% 100%;
  border-bottom-left-radius: 100% 40%;
  -webkit-mask-image: radial-gradient(110% 90% at 0% 50%, black 60%, transparent 61%);
  mask-image: radial-gradient(110% 90% at 0% 50%, black 60%, transparent 61%);
  box-shadow: inset 0 0.2vmin 1.2vmin rgba(255,255,255,0.08), inset 0 -0.3vmin 0.8vmin rgba(0,0,0,0.35);
}

.rose__leaf--left {
  left: calc(50% - 7vmin);
  transform-origin: right bottom;
  transform: rotate(-28deg);
  animation: leaf-sway 6s ease-in-out infinite reverse;
}

.rose__leaf--right {
  left: 50%;
  transform-origin: left bottom;
  transform: rotateY(180deg) rotate(-18deg);
  animation: leaf-sway 6s ease-in-out infinite;
}

.rose__bud {
  position: absolute;
  left: 50%;
  bottom: 52vmin;
  transform: translateX(-50%);
  width: 26vmin;
  height: 26vmin;
  filter: drop-shadow(0 1vmin 1.6vmin rgba(0,0,0,0.45));
}

.rose__core {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 7vmin;
  height: 7vmin;
  border-radius: 50%;
  background:
    radial-gradient(120% 120% at 60% 30%, var(--rose-highlight), transparent 60%),
    radial-gradient(closest-side, var(--rose-3), var(--rose-2));
  animation: core-bloom 2.8s 0.6s ease-out backwards;
}

.rose__petal {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 16vmin;
  height: 22vmin;
  transform-origin: bottom center;
  transform: translate(-50%, -100%) scale(0.2);
  border-radius: 60% 60% 48% 48% / 72% 72% 36% 36%;
  background:
    radial-gradient(120% 160% at 50% 20%, rgba(255,255,255,0.25), transparent 55%),
    radial-gradient(120% 160% at 50% 90%, rgba(0,0,0,0.35), transparent 60%),
    linear-gradient(180deg, var(--rose-3), var(--rose-2) 55%, var(--rose-1));
  box-shadow: inset 0 0.6vmin 1.4vmin rgba(255,255,255,0.12), inset 0 -0.6vmin 1.2vmin rgba(0,0,0,0.35);
}

.rose__petal--1 { transform: translate(-50%, -88%) rotate(0deg) scale(0); animation: petal-bloom 1.2s 0.4s ease-out forwards; z-index: 8; }
.rose__petal--2 { transform: translate(-50%, -88%) rotate(35deg) scale(0); animation: petal-bloom 1.2s 0.55s ease-out forwards; z-index: 7; }
.rose__petal--3 { transform: translate(-50%, -88%) rotate(-35deg) scale(0); animation: petal-bloom 1.2s 0.65s ease-out forwards; z-index: 7; }
.rose__petal--4 { transform: translate(-50%, -90%) rotate(70deg) scale(0); animation: petal-bloom 1.2s 0.8s ease-out forwards; z-index: 6; }
.rose__petal--5 { transform: translate(-50%, -90%) rotate(-70deg) scale(0); animation: petal-bloom 1.2s 0.9s ease-out forwards; z-index: 6; }
.rose__petal--6 { transform: translate(-50%, -92%) rotate(105deg) scale(0); animation: petal-bloom 1.2s 1.05s ease-out forwards; z-index: 5; }
.rose__petal--7 { transform: translate(-50%, -92%) rotate(-105deg) scale(0); animation: petal-bloom 1.2s 1.15s ease-out forwards; z-index: 5; }
.rose__petal--8 { transform: translate(-50%, -96%) rotate(150deg) scale(0); animation: petal-bloom 1.2s 1.3s ease-out forwards; z-index: 4; }

.fireflies {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.firefly {
  position: absolute;
  left: 50%;
  bottom: 8vmin;
  width: 0.9vmin;
  height: 0.9vmin;
  background: #fff2a8;
  border-radius: 50%;
  filter: blur(0.1vmin) drop-shadow(0 0 0.6vmin rgba(255,255,170,0.7));
  animation: fly 8s linear infinite;
}

.firefly:nth-child(1) { animation-delay: 0s; transform: translate(-20vmin, 0); }
.firefly:nth-child(2) { animation-delay: 1s; transform: translate(10vmin, 2vmin); }
.firefly:nth-child(3) { animation-delay: 2.2s; transform: translate(28vmin, -1vmin); }
.firefly:nth-child(4) { animation-delay: 3.1s; transform: translate(-30vmin, 3vmin); }
.firefly:nth-child(5) { animation-delay: 4.4s; transform: translate(22vmin, 1vmin); }
.firefly:nth-child(6) { animation-delay: 5.2s; transform: translate(-12vmin, -2vmin); }
.firefly:nth-child(7) { animation-delay: 5.9s; transform: translate(0vmin, 4vmin); }
.firefly:nth-child(8) { animation-delay: 6.3s; transform: translate(14vmin, -3vmin); }
.firefly:nth-child(9) { animation-delay: 7.1s; transform: translate(-24vmin, 2vmin); }
.firefly:nth-child(10) { animation-delay: 7.6s; transform: translate(30vmin, -2vmin); }

@keyframes petal-bloom {
  0% { transform: translate(-50%, -88%) rotate(var(--r,0deg)) scale(0); opacity: 0; }
  60% { opacity: 1; }
  100% { transform: translate(-50%, -100%) rotate(var(--r,0deg)) scale(1); opacity: 1; }
}

@keyframes core-bloom {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
  80% { opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

@keyframes sway {
  0%, 100% { transform: translateX(-50%) rotate(-1deg); }
  50% { transform: translateX(-50%) rotate(2deg); }
}

@keyframes leaf-sway {
  0%, 100% { transform: rotate(var(--start, -28deg)); }
  50% { transform: rotate(calc(var(--start, -28deg) + 6deg)); }
}

@keyframes fly {
  0% { opacity: 0; transform: translate(0, 0) scale(0.6); }
  5% { opacity: 1; }
  25% { transform: translate(6vmin, -8vmin) scale(1); }
  50% { transform: translate(-10vmin, -18vmin) scale(0.9); }
  75% { transform: translate(8vmin, -28vmin) scale(1); }
  100% { opacity: 0; transform: translate(-2vmin, -40vmin) scale(0.7); }
}

/* Adapt petals' rotation custom property for readability */
.rose__petal--2 { --r: 35deg; }
.rose__petal--3 { --r: -35deg; }
.rose__petal--4 { --r: 70deg; }
.rose__petal--5 { --r: -70deg; }
.rose__petal--6 { --r: 105deg; }
.rose__petal--7 { --r: -105deg; }
.rose__petal--8 { --r: 150deg; }

/* Anniversary message */
.message {
  position: absolute;
  bottom: 2vmin;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  font-size: clamp(2rem, 5.2vmin, 4rem);
  font-family: "Arial Black", "Segoe UI", Arial, sans-serif;
  font-weight: 900;
  letter-spacing: 0.04em;
  color: #ffe7ef;
  text-shadow:
    0 0 0.6vmin rgba(255, 110, 130, 0.6),
    0 0 1.2vmin rgba(255, 110, 130, 0.35),
    0 0 2.2vmin rgba(255, 200, 210, 0.3);
  animation: message-reveal 1.2s ease-out backwards, message-float 6s ease-in-out infinite;
  white-space: nowrap;
}

.message::after {
  content: "‚ù§";
  display: inline-block;
  margin-left: 0.5ch;
  color: #ff6b8a;
  text-shadow: 0 0 0.5vmin rgba(255, 107, 138, 0.9);
  animation: beat 1.6s ease-in-out infinite;
  transform-origin: center;
}

@keyframes beat {
  0%, 100% { transform: scale(1); }
  30% { transform: scale(1.15); }
  60% { transform: scale(0.97); }
}

@keyframes message-reveal {
  0% { opacity: 0; transform: translateX(-50%) translateY(6px) scale(0.97); }
  100% { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
}

@keyframes message-float {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(-6px); }
}

@supports (-webkit-background-clip: text) {
  .message {
    background-image: linear-gradient(90deg, #ffd1da, #fff7aa 50%, #ffd1da);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
}

@media (max-width: 640px) {
  .rose__bud { width: 22vmin; height: 22vmin; bottom: 50vmin; }
  .rose__stem { height: 50vmin; }
  .rose__leaf { bottom: 22vmin; }
}

